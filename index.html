<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MoodRay</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="section">
    <img src="logo.png" alt="MoodRay Logo" class="logo" />
    <h1>Welcome to MoodRay</h1>
    <p>Lighting and music synced with your emotions.</p>
  </header>

  <section class="section alt" id="about">
    <h2>About MoodRay</h2>
    <p>MoodRay is a smart lamp that adapts its lighting and music to your mood, promoting mental well-being for teens and young adults.</p>
  </section>

  <section class="section" id="features">
    <h2>Features</h2>
    <ul>
      <li>Mood-based lighting and music</li>
      <li>Voice input and mood detection</li>
      <li>Spotify and smart home integration</li>
      <li>Track your moods daily</li>
    </ul>
  </section>

  <!-- NEW: CSR & Sustainability Section -->
  <section class="section alt" id="sustainability">
    <h2>CSR & Sustainability</h2>
    <p>At MoodRay, we care about people and the planet. Our products use recyclable materials, and a portion of each purchase supports mental health initiatives.</p>
  </section>

  <!-- Mood Color Scale -->
  <section class="section" id="mood-color-scale">
    <h2>Mood Color Scale</h2>
    <div class="mood-circle">
      <div class="mood-item" style="--dot-color: black;">Stressed</div>
      <div class="mood-item" style="--dot-color: gray;">Nervous</div>
      <div class="mood-item" style="--dot-color: brown;">Tired</div>
      <div class="mood-item" style="--dot-color: orange;">Uncertain</div>
      <div class="mood-item" style="--dot-color: green;">Calm</div>
      <div class="mood-item" style="--dot-color: teal;">Relaxed</div>
      <div class="mood-item" style="--dot-color: blue;">Happy</div>
      <div class="mood-item" style="--dot-color: violet;">Excited</div>
      <div class="mood-item" style="--dot-color: pink;">Loved</div>
      <div class="mood-item" style="--dot-color: gold;">Confident</div>
    </div>
  </section>

  <!-- Mood Calendar -->
  <section class="section alt" id="mood-calendar">
    <h2>Mood Calendar</h2>
    <div class="calendar" id="calendar"></div>
    <table id="mood-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Mood 1</th>
          <th>Mood 2</th>
          <th>Mood 3</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- Buy Now -->
  <section class="section" id="buy">
    <h2>Buy Now</h2>
    <a href="#" class="btn">Order your MoodRay today</a>
  </section>

  <script>
    const moods = [
      { name: "Stressed", color: "black" },
      { name: "Nervous", color: "gray" },
      { name: "Tired", color: "brown" },
      { name: "Uncertain", color: "orange" },
      { name: "Calm", color: "green" },
      { name: "Relaxed", color: "teal" },
      { name: "Happy", color: "blue" },
      { name: "Excited", color: "violet" },
      { name: "Loved", color: "pink" },
      { name: "Confident", color: "gold" },
    ];

    const calendar = document.getElementById("calendar");
    const moodTable = document.getElementById("mood-table").querySelector("tbody");
    const today = new Date();
    const month = today.getMonth();
    const year = today.getFullYear();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    const moodData = JSON.parse(localStorage.getItem("moodData") || "{}");

    function saveMoodData() {
      localStorage.setItem("moodData", JSON.stringify(moodData));
    }

    function updateDropdowns(dateStr, moodIndex, moodName) {
      if (!moodData[dateStr]) moodData[dateStr] = [null, null, null];
      moodData[dateStr][moodIndex] = moodName;
      saveMoodData();
    }

    function createDropdown(dateStr, moodIndex) {
      const select = document.createElement("select");
      const emptyOption = document.createElement("option");
      emptyOption.value = "";
      emptyOption.textContent = "--";
      select.appendChild(emptyOption);

      moods.forEach((mood) => {
        const option = document.createElement("option");
        option.value = mood.name;
        option.textContent = mood.name;
        select.appendChild(option);
      });

      select.value = moodData[dateStr]?.[moodIndex] || "";
      select.addEventListener("change", () => {
        updateDropdowns(dateStr, moodIndex, select.value);
      });

      return select;
    }

    for (let i = 1; i <= daysInMonth; i++) {
      const dateStr = `${year}-${String(month + 1).padStart(2, "0")}-${String(i).padStart(2, "0")}`;
      const cell = document.createElement("div");
      cell.className = "calendar-cell";
      cell.textContent = i;

      let clickIndex = 0;
      cell.addEventListener("click", () => {
        const nextMood = moods[clickIndex % moods.length];
        if (!moodData[dateStr]) moodData[dateStr] = [null, null, null];
        moodData[dateStr][0] = nextMood.name;
        saveMoodData();
        cell.style.backgroundColor = nextMood.color;
        clickIndex++;
      });

      if (moodData[dateStr]?.[0]) {
        const mood = moods.find(m => m.name === moodData[dateStr][0]);
        if (mood) cell.style.backgroundColor = mood.color;
      }

      calendar.appendChild(cell);

      // Table row
      const row = document.createElement("tr");
      const dateCell = document.createElement("td");
      dateCell.textContent = dateStr;
      row.appendChild(dateCell);

      for (let j = 0; j < 3; j++) {
        const moodCell = document.createElement("td");
        moodCell.appendChild(createDropdown(dateStr, j));
        row.appendChild(moodCell);
      }

      moodTable.appendChild(row);
    }
  </script>
</body>
</html>
